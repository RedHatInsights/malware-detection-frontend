import React from 'react';
import messages from '../../Messages';
import InsightsLink from '@redhat-cloud-services/frontend-components/InsightsLink';
import StatusLabel from '../StatusLabel/StatusLabel';
import { DateFormat } from '@redhat-cloud-services/frontend-components';
import { Icon } from '@patternfly/react-core';
import { BellIcon } from '@patternfly/react-icons';

export const sysDetailsTableColumns = (intl) => [
  {
    title: intl.formatMessage(messages.sigName),
    width: 55,
    sort: 1,
    renderFunc: (host) => (
      <InsightsLink to={`/signatures/${host.name}`}>{host.name}</InsightsLink>
    ),
  },
  {
    title: intl.formatMessage(messages.lastStatus),
    width: 10,
    sort: 2,
    renderFunc: (host) => (
      <StatusLabel
        isDisabled={host.isDisabled}
        hasMatch={host.lastStatus}
        displayMatch
      />
    ),
  },
  {
    title: intl.formatMessage(messages.matched),
    width: 10,
    sort: 3,
    renderFunc: (host) => (
      <DateFormat date={new Date(host.lastMatchDate)} type="onlyDate" />
    ),
  },
  {
    title: intl.formatMessage(messages.newMatchCount),
    width: 10,
    sort: 4,
    renderFunc: (host) => (
      <span>
        {host.newMatchCount > 0 ? (
          <span>
            <Icon
              data-testid="new-matches-bell-icon"
              status="info"
              style={{ marginRight: '8px' }}
            >
              <BellIcon />
            </Icon>
            {host.newMatchCount?.toLocaleString()}
          </span>
        ) : (
          <span className="pf-v5-u-disabled-color-200">
            {host.newMatchCount?.toLocaleString()}
          </span>
        )}
      </span>
    ),
  },
  {
    title: intl.formatMessage(messages.totalMatches),
    width: 15,
    sort: 5,
    renderFunc: (host) => host.matchCount?.toLocaleString(),
  },
];
