import { Card, CardBody } from '@patternfly/react-core/dist/esm/components/Card';

import { GET_SCAN_STATS } from '../../operations/queries';
import Loading from '../../Components/Loading/Loading';
import NumberDescription from '../NumberDescription/NumberDescription';
import React from 'react';
import messages from '../../Messages';
import { useIntl } from 'react-intl';
import { useQuery } from '@apollo/client';

const ChartCard = () => {

    const intl = useIntl();
    const { data: sysStatsData, loading: sysStatsLoading } = useQuery(GET_SCAN_STATS);

    return <Card>
        <CardBody>
            {sysStatsLoading ? <Loading /> :
                <NumberDescription
                    data={ sysStatsData?.hostScans.totalCount }
                    dataSize='md'
                    description={ intl.formatMessage(messages.analysisRunAcross,
                        { systems: sysStatsData?.hosts.totalCount, matches: sysStatsData?.ruleStats.matchedCount }) }
                    layout='horizontal'
                />
            }
        </CardBody>
    </Card>;
};

export default ChartCard;
